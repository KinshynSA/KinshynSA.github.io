{"ast":null,"code":"import _objectSpread from\"D:/Repositories/portfolio-website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"D:/Repositories/portfolio-website/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Repositories/portfolio-website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"D:/Repositories/portfolio-website/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useEffect}from\"react\";import styled from\"styled-components\";import Field from'./field';import{findFieldForName,findFieldsForName,validateField}from'./utils.js';import{Button}from'..';import{createElement as _createElement}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Block=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));var Box=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\ndisplay: flex;\\njustify-content: space-between;\\nflex-wrap: wrap;\\n\"])));var ButtonContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\ndisplay: flex;\\njustify-content: flex-end;\\nmargin-top: 30px;\\n\"])));export default function Form(props){var _props$sendText;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),formBlocked=_useState2[0],setFormBlocked=_useState2[1];useEffect(function(){validateForm();},[props.fields]);function validateForm(){var flag=false;props.fields.forEach(function(field){findError(field);});setFormBlocked(flag);function findError(field){if(field.hide)return;if(field.type==='block'){var _field$childs;var childs=(_field$childs=field.childs)!==null&&_field$childs!==void 0?_field$childs:[];childs.forEach(function(item){return findError(item);});}if(field.required){if(field.error)flag=true;if(field.type==='checkbox'||field.type==='radio'){if(!field.checked)flag=true;}else{if(field.value===''||field.value===undefined||field.value===null)flag=true;}}}}function onChange(obj){var event=obj.event,name=obj.name,type=obj.type,option=obj.option,value=obj.value;var arr=_toConsumableArray(props.fields);if(type==='radio'){var radioArr=findFieldsForName(arr,name);radioArr.forEach(function(field){field.checked=false;if(field.value===value){field.checked=true;}});}else{changeField(findFieldForName(arr,name));}if(type==='tel'){if(!Number.isInteger(+event.nativeEvent.data))return;if(event.nativeEvent.data===' ')return;}props.setFields(arr);function changeField(field){if(type==='checkbox'){field.checked=!field.checked;}else if(type==='file'){field.value=value;}else if(type==='select'){field.value=option.value;}else{field.value=event.target.value;}if(field.required)validateField(field);}}return/*#__PURE__*/_jsxs(Block,{children:[/*#__PURE__*/_jsx(Box,{children:props.fields.map(function(field,i){return/*#__PURE__*/_createElement(Field,_objectSpread(_objectSpread({},field),{},{onChange:onChange,key:i}));})}),/*#__PURE__*/_jsx(ButtonContainer,{children:/*#__PURE__*/_jsx(Button,{disabled:formBlocked,onClick:function onClick(){if(formBlocked)return;props.send();},children:/*#__PURE__*/_jsx(\"span\",{children:(_props$sendText=props.sendText)!==null&&_props$sendText!==void 0?_props$sendText:'Send'})})})]});}","map":{"version":3,"names":["React","useState","useEffect","styled","Field","findFieldForName","findFieldsForName","validateField","Button","Block","div","Box","ButtonContainer","Form","props","formBlocked","setFormBlocked","validateForm","fields","flag","forEach","field","findError","hide","type","childs","item","required","error","checked","value","undefined","onChange","obj","event","name","option","arr","radioArr","changeField","Number","isInteger","nativeEvent","data","setFields","target","map","i","send","sendText"],"sources":["D:/Repositories/portfolio-website/src/components/form/index.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Field from './field';\r\nimport {findFieldForName, findFieldsForName, validateField} from './utils.js';\r\nimport { Button } from '..';\r\n\r\n\r\nconst Block = styled.div``\r\nconst Box = styled.div`\r\ndisplay: flex;\r\njustify-content: space-between;\r\nflex-wrap: wrap;\r\n`\r\nconst ButtonContainer = styled.div`\r\ndisplay: flex;\r\njustify-content: flex-end;\r\nmargin-top: 30px;\r\n`\r\n\r\n\r\nexport default function Form(props){\r\n    const [formBlocked, setFormBlocked] = useState(true);   \r\n\r\n    useEffect(() => {\r\n        validateForm();\r\n    },[props.fields])\r\n\r\n    function validateForm(){\r\n      let flag = false;\r\n  \r\n      props.fields.forEach((field) => {\r\n        findError(field);\r\n      })\r\n  \r\n      setFormBlocked(flag);\r\n  \r\n      function findError(field){\r\n        if(field.hide) return;\r\n  \r\n        if(field.type === 'block'){\r\n          let childs = field.childs ?? [];\r\n          childs.forEach(item => findError(item))\r\n        }\r\n  \r\n        if(field.required){\r\n          if(field.error) flag = true;\r\n          if(field.type === 'checkbox' || field.type === 'radio'){\r\n            if(!field.checked) flag = true;\r\n          } else {\r\n            if(field.value === '' || field.value === undefined || field.value === null) flag = true;\r\n          } \r\n        }\r\n      }\r\n    }\r\n\r\n    function onChange(obj){\r\n      let {event,name,type,option,value} = obj;\r\n      let arr = [...props.fields];\r\n  \r\n      if(type === 'radio'){\r\n        let radioArr = findFieldsForName(arr,name);\r\n        radioArr.forEach(field => {\r\n          field.checked = false;\r\n          if(field.value === value){\r\n            field.checked = true;\r\n          }\r\n        })\r\n      } else {\r\n        changeField(findFieldForName(arr,name))\r\n      }\r\n  \r\n      if(type === 'tel'){\r\n        if(!Number.isInteger(+event.nativeEvent.data)) return;\r\n        if(event.nativeEvent.data === ' ') return;\r\n      }\r\n  \r\n      props.setFields(arr);\r\n  \r\n      function changeField(field){\r\n        if(type === 'checkbox'){\r\n          field.checked = !field.checked;\r\n        } else if(type === 'file'){\r\n          field.value = value;\r\n        } else if(type === 'select'){\r\n          field.value = option.value;\r\n        } else {\r\n          field.value = event.target.value;\r\n        }\r\n  \r\n        if(field.required) validateField(field);\r\n      }\r\n    }\r\n\r\n    return (\r\n        <Block>\r\n            <Box>\r\n                {props.fields.map((field, i) => {\r\n                    return (\r\n                        <Field\r\n                            {...field}\r\n                            onChange={onChange}\r\n                            key={i}\r\n                        />\r\n                    )\r\n                })}\r\n            </Box>\r\n            <ButtonContainer>\r\n                <Button\r\n                    disabled={formBlocked}\r\n                    onClick={() => {\r\n                        if(formBlocked) return;\r\n                        props.send();\r\n                    }\r\n                }>\r\n                    <span>{props.sendText ?? 'Send'}</span>\r\n                </Button>\r\n            </ButtonContainer>\r\n        </Block>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}